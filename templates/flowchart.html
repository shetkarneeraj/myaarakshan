{% extends "base.html" %}
{% load static %}

{% block title %}рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдлреНрд▓реЛрдЪрд╛рд░реНрдЯ - рдорд░рд╛рдард╛ рдЖрд░рдХреНрд╖рдг рдордВрдЪ{% endblock %}

{% block content %}
<div class="container py-5">
    <!-- Header -->
    <div class="row mb-5">
        <div class="col-12 text-center">
            <h1 class="display-5 text-primary mb-3">ЁЯУК рдХреБрдгрдмреА рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдлреНрд▓реЛрдЪрд╛рд░реНрдЯ</h1>
            <p class="lead">Step-by-step рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЖрдгрд┐ рдирд┐рд░реНрдгрдп рдЭрд╛рдб</p>
        </div>
    </div>

    <!-- Flowchart Container -->
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <div class="flowchart-container">
                
                <!-- Step 1: Start -->
                <div class="flowchart-step">
                    <i class="fas fa-play me-2"></i>
                    <strong>рдЕрд░реНрдЬрджрд╛рд░ рдЕрд░реНрдЬ рджрд╛рдЦрд▓ рдХрд░рддреЛ</strong>
                    <small class="d-block mt-1">рдЧреНрд░рд╛рдорд╕реНрддрд░ рд╕рдорд┐рддреАрдХрдбреЗ рд╕рд░реНрд╡ рдХрд╛рдЧрджрдкрддреНрд░рд╛рдВрд╕рд╣</small>
                </div>

                <!-- Decision 1: Residence Proof -->
                <div class="flowchart-step flowchart-decision">
                    <i class="fas fa-question-circle me-2"></i>
                    <strong>резрей рдСрдХреНрдЯреЛрдмрд░ резрепремрен рдкреВрд░реНрд╡реА рд╡рд╛рд╕реНрддрд╡реНрдп рдкреБрд░рд╛рд╡рд╛ рдЖрд╣реЗ рдХрд╛?</strong>
                </div>

                <!-- Split into Yes/No paths -->
                <div class="decision-paths">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="path-label text-center mb-2">
                                <span class="badge bg-success">рд╣реЛрдп рдХрд╛?</span>
                            </div>
                            <div class="flowchart-step flowchart-success">
                                <i class="fas fa-check me-2"></i>
                                <strong>рд╣реЛрдп тЬЕ</strong>
                                <small class="d-block">рдкреБрдвреАрд▓ рддрдкрд╛рд╕рдгреА</small>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="path-label text-center mb-2">
                                <span class="badge bg-danger">рдирд╛рд╣реА рдХрд╛?</span>
                            </div>
                            <div class="flowchart-step flowchart-failure">
                                <i class="fas fa-times me-2"></i>
                                <strong>рдирд╛рд╣реА тЭМ</strong>
                                <small class="d-block">рдЕрдкрд╛рддреНрд░ - рдЕрд░реНрдЬ рдлреЗрдЯрд╛рд│рд▓рд╛</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Decision 2: Relatives/Evidence -->
                <div class="flowchart-step flowchart-decision">
                    <i class="fas fa-users me-2"></i>
                    <strong>рдирд╛рддреЗрд╡рд╛рдИрдХрд╛рдВрдХрдбреЗ рдХреБрдгрдмреА рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдЖрд╣реЗ рдХрд╛?</strong>
                    <small class="d-block mt-1">рдХрд┐рдВрд╡рд╛ рдЗрддрд░ рдкреБрд░рд╛рд╡реЗ рдЖрд╣реЗрдд рдХрд╛? (рдЬрдореАрди/рд╢рд╛рд│рд╛)</small>
                </div>

                <!-- Split for evidence paths -->
                <div class="decision-paths">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="path-label text-center mb-2">
                                <span class="badge bg-success">рд╣реЛрдп - рдирд╛рддреЗрд╡рд╛рдИрдХрд╛рдХрдбреЗ рдЖрд╣реЗ</span>
                            </div>
                            <div class="flowchart-step flowchart-success">
                                <i class="fas fa-certificate me-2"></i>
                                <strong>рдирд╛рддреЗрд╡рд╛рдИрдХрд╛рдЪреЗ рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдЖрд╣реЗ</strong>
                                <small class="d-block">рддреНрдпрд╛ рдЖрдзрд╛рд░реЗ рдкрд╛рддреНрд░</small>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="path-label text-center mb-2">
                                <span class="badge bg-warning">рдирд╛рд╣реА - рдЗрддрд░ рдкреБрд░рд╛рд╡реЗ рддрдкрд╛рд╕рд╛рд╡реЗ</span>
                            </div>
                            <div class="flowchart-step flowchart-decision">
                                <i class="fas fa-search me-2"></i>
                                <strong>рдЗрддрд░ рдкреБрд░рд╛рд╡реЗ рддрдкрд╛рд╕рдгреЗ</strong>
                                <small class="d-block">рдЧреНрд░рд╛рдо рд╕рдорд┐рддреА рддрдкрд╛рд╕рдгреА</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Committee Process -->
                <div class="flowchart-step">
                    <i class="fas fa-users-cog me-2"></i>
                    <strong>рдЧреНрд░рд╛рдо рд╕рдорд┐рддреА рддрдкрд╛рд╕рдгреА</strong>
                    <small class="d-block mt-1">рдЧреНрд░рд╛рдо рдорд╣рд╕реВрд▓ рдЕрдзрд┐рдХрд╛рд░реА + рдЧреНрд░рд╛рдордкрдВрдЪрд╛рдпрдд рдЕрдзрд┐рдХрд╛рд░реА + рд╕рд╣рд╛рдпреНрдпрдХ рдХреГрд╖реА рдЕрдзрд┐рдХрд╛рд░реА</small>
                </div>

                <div class="flowchart-step">
                    <i class="fas fa-building me-2"></i>
                    <strong>рддрд╛рд▓реБрдХрд╛ рд╕рдорд┐рддреА</strong>
                    <small class="d-block mt-1">рдЕрд╣рд╡рд╛рд▓ рддрдкрд╛рд╕рдгреА рдЖрдгрд┐ рдкреНрд░рд╛рдердорд┐рдХ рдирд┐рд░реНрдгрдп</small>
                </div>

                <div class="flowchart-step">
                    <i class="fas fa-gavel me-2"></i>
                    <strong>Scrutiny Committee (рд╕рдХреНрд╖рдо рдкреНрд░рд╛рдзрд┐рдХрд╛рд░реА)</strong>
                    <small class="d-block mt-1">рдЕрдВрддрд┐рдо рддрдкрд╛рд╕рдгреА рдЖрдгрд┐ рдирд┐рд░реНрдгрдп</small>
                </div>

                <!-- Final Decision -->
                <div class="flowchart-step flowchart-decision">
                    <i class="fas fa-balance-scale me-2"></i>
                    <strong>рд╕рд░реНрд╡ рдкреБрд░рд╛рд╡реЗ рдпреЛрдЧреНрдп рдЖрд╣реЗрдд рдХрд╛?</strong>
                </div>

                <!-- Final Results -->
                <div class="decision-paths">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="path-label text-center mb-2">
                                <span class="badge bg-success">рдкреБрд░рд╛рд╡реЗ рдпреЛрдЧреНрдп рдЖрд╣реЗрдд</span>
                            </div>
                            <div class="flowchart-step flowchart-success">
                                <i class="fas fa-award me-2"></i>
                                <strong>рдкрд╛рддреНрд░ тЬЕ</strong>
                                <small class="d-block">OBC (рдХреБрдгрдмреА) рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдЬрд╛рд░реА</small>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="path-label text-center mb-2">
                                <span class="badge bg-danger">рдкреБрд░рд╛рд╡реЗ рдЕрдкреБрд░реЗ рдЖрд╣реЗрдд</span>
                            </div>
                            <div class="flowchart-step flowchart-failure">
                                <i class="fas fa-ban me-2"></i>
                                <strong>рдЕрдкрд╛рддреНрд░ тЭМ</strong>
                                <small class="d-block">рдЕрд░реНрдЬ рдлреЗрдЯрд╛рд│рд▓рд╛ - рдХрд╛рд░рдг рд╕реВрдЪрд┐рдд</small>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Important Notes -->
    <div class="row mt-5">
        <div class="col-lg-8 mx-auto">
            <div class="alert alert-info border-0 shadow">
                <h5><i class="fas fa-info-circle me-2"></i>рдорд╣рддреНрд╡рд╛рдЪреНрдпрд╛ рдЯрд┐рдкреНрдкрдгреНрдпрд╛</h5>
                <ul class="mb-0">
                    <li><strong>рдХрд╛рд▓рдорд░реНрдпрд╛рджрд╛:</strong> рд╕рд╛рдорд╛рдиреНрдпрддрдГ рейреж-репреж рджрд┐рд╡рд╕ (рдХрд╛рдЧрджрдкрддреНрд░рд╛рдВрд╡рд░ рдЕрд╡рд▓рдВрдмреВрди)</li>
                    <li><strong>рдЕрдкреАрд▓:</strong> рдЕрд░реНрдЬ рдирд╛рдХрд╛рд░рд▓реНрдпрд╛рд╕ рдЙрдЪреНрдЪ рдкреНрд░рд╛рдзрд┐рдХрд╛рд▒реНрдпрд╛рдХрдбреЗ рдЕрдкреАрд▓ рдХрд░рддрд╛ рдпреЗрддреЗ</li>
                    <li><strong>рдлреА:</strong> рдЕрд░реНрдЬ рдлреА рдЖрдгрд┐ рдЗрддрд░ рд╢реБрд▓реНрдХрд╛рдЪреА рдорд╛рд╣рд┐рддреА рд╕рдВрдмрдВрдзрд┐рдд рдХрд╛рд░реНрдпрд╛рд▓рдпрд╛рдд рдорд┐рд│реЗрд▓</li>
                    <li><strong>рддрдкрд╛рд╕рдгреА:</strong> рдкреНрд░рддреНрдпреЗрдХ рдЯрдкреНрдкреНрдпрд╛рд╡рд░ рдХрд╛рдЧрджрдкрддреНрд░рд╛рдВрдЪреА рдХрдбрдХ рддрдкрд╛рд╕рдгреА рд╣реЛрддреЗ</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="row mt-4">
        <div class="col-lg-8 mx-auto">
            <div class="row">
                <div class="col-md-3 mb-3">
                    <a href="{% url 'core:guide' %}" class="btn btn-primary btn-lg w-100">
                        <i class="fas fa-book me-2"></i>рд╕рдВрдкреВрд░реНрдг рдорд╛рд░реНрдЧрджрд░реНрд╢рдХ
                    </a>
                </div>
                <div class="col-md-3 mb-3">
                    <a href="{% url 'core:eligibility_check' %}" class="btn btn-success btn-lg w-100">
                        <i class="fas fa-clipboard-check me-2"></i>рдкрд╛рддреНрд░рддрд╛ рддрдкрд╛рд╕рд╛
                    </a>
                </div>
                <div class="col-md-3 mb-3">
                    <a href="{% url 'core:documents' %}" class="btn btn-info btn-lg w-100">
                        <i class="fas fa-download me-2"></i>рдлреЙрд░реНрдо рдбрд╛рдЙрдирд▓реЛрдб
                    </a>
                </div>
                <div class="col-md-3 mb-3">
                    <a href="{% url 'core:nearest_office' %}" class="btn btn-warning btn-lg w-100">
                        <i class="fas fa-map-marker-alt me-2"></i>рдЬрд╡рд│реАрд▓ рдХрд╛рд░реНрдпрд╛рд▓рдп
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* Enhanced flowchart styles */
.flowchart-container {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-radius: 20px;
    padding: 40px;
    position: relative;
    overflow: hidden;
}

.flowchart-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="1" fill="rgba(255,107,53,0.05)"/><circle cx="80" cy="40" r="1.5" fill="rgba(255,107,53,0.03)"/><circle cx="40" cy="80" r="1" fill="rgba(255,107,53,0.05)"/></svg>');
    pointer-events: none;
}

.flowchart-step {
    position: relative;
    z-index: 2;
    margin: 20px 0;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
}

.flowchart-step:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}

.flowchart-decision {
    border-radius: 20px !important;
    background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%) !important;
    border: 2px solid #ffc107 !important;
    color: #856404 !important;
}

.flowchart-success {
    background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%) !important;
    border: 2px solid #28a745 !important;
    color: #155724 !important;
}

.flowchart-failure {
    background: linear-gradient(135deg, #f8d7da 0%, #f1b0b7 100%) !important;
    border: 2px solid #dc3545 !important;
    color: #721c24 !important;
}

/* Custom arrow indicators */
.flowchart-step::after {
    content: 'тмЗ';
    position: absolute;
    bottom: -25px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 1.5rem;
    color: var(--primary-color);
    text-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.flowchart-step:last-child::after,
.flowchart-failure::after {
    display: none;
}

/* Decision path styling */
.decision-paths {
    margin: 20px 0;
}

.path-label {
    margin-bottom: 10px;
}

.path-label .badge {
    font-size: 0.9rem;
    padding: 8px 15px;
    border-radius: 20px;
    font-weight: 600;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.decision-paths .flowchart-step {
    margin: 10px 0;
}

.decision-paths .flowchart-step::after {
    display: none; /* Remove arrows for decision paths */
}

@media (max-width: 768px) {
    .flowchart-container {
        padding: 15px;
        margin: 0 5px;
    }
    
    .flowchart-step {
        font-size: 0.85rem;
        padding: 12px 15px;
        margin: 15px 0;
    }
    
    .flowchart-step small {
        font-size: 0.75rem;
        line-height: 1.3;
    }
    
    .flowchart-step::after {
        bottom: -20px;
        font-size: 1.2rem;
    }
    
    .row .col-md-6 {
        margin-bottom: 10px;
    }
    
    .flowchart-step i {
        font-size: 1rem;
    }
    
    .decision-paths .col-md-6 {
        margin-bottom: 20px;
    }
    
    .path-label .badge {
        font-size: 0.8rem;
        padding: 6px 12px;
    }
}

@media (max-width: 576px) {
    .display-5 {
        font-size: 1.8rem;
    }
    
    .lead {
        font-size: 1rem;
    }
    
    .flowchart-container {
        padding: 10px;
        margin: 0;
    }
    
    .flowchart-step {
        font-size: 0.8rem;
        padding: 10px 12px;
    }
    
    .flowchart-step strong {
        font-size: 0.85rem;
    }
    
    .btn-lg {
        padding: 8px 15px;
        font-size: 0.9rem;
    }
}
</style>
{% endblock %}

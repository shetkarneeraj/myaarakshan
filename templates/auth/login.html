{% extends "base.html" %}

{% block title %}‡§≤‡•â‡§ó‡§ø‡§® - ‡§Æ‡§∞‡§æ‡§†‡§æ ‡§Ü‡§∞‡§ï‡•ç‡§∑‡§£ ‡§Æ‡§Ç‡§ö{% endblock %}

{% block content %}
<div class="container py-5">
    <!-- Header -->
    <div class="row mb-5">
        <div class="col-12 text-center">
            <h1 class="display-5 text-primary mb-3">üîê ‡§≤‡•â‡§ó‡§ø‡§®</h1>
            <p class="lead">‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§ñ‡§æ‡§§‡•ç‡§Ø‡§æ‡§§ ‡§™‡•ç‡§∞‡§µ‡•á‡§∂ ‡§ï‡§∞‡§æ</p>
        </div>
    </div>

    <!-- Login Form -->
    <div class="row">
        <div class="col-lg-4 mx-auto">
            <div class="card border-0 shadow-lg">
                <div class="card-header bg-primary text-white text-center">
                    <h4><i class="fas fa-sign-in-alt me-2"></i>‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡§æ</h4>
                </div>
                <div class="card-body p-4">
                    <form method="POST" action="{% url 'accounts:login' %}">
                        <div class="mb-3">
                            <label for="email" class="form-label">‡§à‡§Æ‡•á‡§≤ ‡§™‡§§‡•ç‡§§‡§æ <span class="text-danger">*</span></label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-envelope"></i></span>
                                <input type="email" class="form-control" id="email" name="email" required autofocus>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="password" class="form-label">‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° <span class="text-danger">*</span></label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-lock"></i></span>
                                <input type="password" class="form-control" id="password" name="password" required>
                                <button class="btn btn-outline-secondary" type="button" onclick="togglePassword()">
                                    <i class="fas fa-eye" id="toggleIcon"></i>
                                </button>
                            </div>
                        </div>

                        <div class="mb-3 d-flex justify-content-between align-items-center">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="remember_me" name="remember_me">
                                <label class="form-check-label" for="remember_me">
                                    ‡§Æ‡§≤‡§æ ‡§≤‡§ï‡•ç‡§∑‡§æ‡§§ ‡§†‡•á‡§µ‡§æ
                                </label>
                            </div>
                            <a href="#" class="text-primary" data-bs-toggle="modal" data-bs-target="#forgotModal">‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§µ‡§ø‡§∏‡§∞‡§≤‡§æ‡§§?</a>
                        </div>

                        <div class="d-grid mb-3">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-sign-in-alt me-2"></i>‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡§æ
                            </button>
                        </div>

                        <!-- Social Login -->
                        <div class="text-center mb-3">
                            <small class="text-muted">‡§ï‡§ø‡§Ç‡§µ‡§æ</small>
                        </div>

                        <div class="d-grid gap-2">
                            <button type="button" class="btn btn-outline-danger" onclick="googleLogin()">
                                <i class="fab fa-google me-2"></i>Google ‡§®‡•á ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡§æ
                            </button>
                            <button type="button" class="btn btn-outline-primary" onclick="facebookLogin()">
                                <i class="fab fa-facebook me-2"></i>Facebook ‡§®‡•á ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡§æ
                            </button>
                        </div>

                        <!-- Register Link -->
                        <div class="text-center mt-4">
                            <p>‡§®‡§µ‡•á ‡§ñ‡§æ‡§§‡•á ‡§π‡§µ‡•á? <a href="{% url 'accounts:register' %}" class="text-primary">‡§®‡•ã‡§Ç‡§¶‡§£‡•Ä ‡§ï‡§∞‡§æ</a></p>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Quick Access -->
        <div class="col-lg-4 offset-lg-1">
            <div class="card border-0 shadow">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0"><i class="fas fa-zap me-2"></i>‡§ú‡§≤‡§¶ ‡§™‡•ç‡§∞‡§µ‡•á‡§∂</h5>
                </div>
                <div class="card-body">
                    <h6>‡§ñ‡§æ‡§§‡•á ‡§®‡§∏‡§≤‡•ç‡§Ø‡§æ‡§∏:</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <a href="{% url 'applications:public_track' %}" class="text-decoration-none">
                                <i class="fas fa-search me-2 text-primary"></i>‡§Ö‡§∞‡•ç‡§ú ‡§∏‡•ç‡§•‡§ø‡§§‡•Ä ‡§§‡§™‡§æ‡§∏‡§æ
                            </a>
                        </li>
                        <li class="mb-2">
                            <a href="{% url 'core:eligibility_check' %}" class="text-decoration-none">
                                <i class="fas fa-check-circle me-2 text-success"></i>‡§™‡§æ‡§§‡•ç‡§∞‡§§‡§æ ‡§§‡§™‡§æ‡§∏‡§æ
                            </a>
                        </li>
                        <li class="mb-2">
                            <a href="{% url 'core:guide' %}" class="text-decoration-none">
                                <i class="fas fa-book me-2 text-warning"></i>‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§ï ‡§µ‡§æ‡§ö‡§æ
                            </a>
                        </li>
                        <li class="mb-2">
                            <a href="{% url 'core:search' %}" class="text-decoration-none">
                                <i class="fas fa-users me-2 text-info"></i>‡§≤‡§æ‡§≠‡§æ‡§∞‡•ç‡§•‡•Ä ‡§∂‡•ã‡§ß‡§æ
                            </a>
                        </li>
                    </ul>

                    <hr>

                    <h6>‡§°‡•á‡§Æ‡•ã ‡§ñ‡§æ‡§§‡•á:</h6>
                    <div class="alert alert-warning">
                        <small>
                            <strong>‡§à‡§Æ‡•á‡§≤:</strong> demo@marathaarakshan.com<br>
                            <strong>‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°:</strong> demo123
                        </small>
                    </div>
                    <button class="btn btn-outline-warning btn-sm w-100" onclick="demoLogin()">
                        <i class="fas fa-play me-2"></i>‡§°‡•á‡§Æ‡•ã ‡§ï‡§∞‡•Ç‡§® ‡§™‡§π‡§æ
                    </button>
                </div>
            </div>

            <!-- Security Notice -->
            <div class="card border-0 mt-3">
                <div class="card-body bg-light">
                    <h6 class="text-danger">
                        <i class="fas fa-shield-alt me-2"></i>‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§∏‡•Ç‡§ö‡§®‡§æ
                    </h6>
                    <ul class="small mb-0">
                        <li>‡§§‡•Å‡§Æ‡§ö‡§æ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§ï‡•ã‡§£‡§æ‡§∂‡•Ä ‡§∂‡•á‡§Ö‡§∞ ‡§ï‡§∞‡•Ç ‡§®‡§ï‡§æ</li>
                        <li>‡§∏‡§æ‡§∞‡•ç‡§µ‡§ú‡§®‡§ø‡§ï ‡§∏‡§Ç‡§ó‡§£‡§ï‡§æ‡§µ‡§∞ logout ‡§ï‡§∞‡§£‡•á ‡§µ‡§ø‡§∏‡§∞‡•Ç ‡§®‡§ï‡§æ</li>
                        <li>‡§∏‡§Ç‡§∂‡§Ø‡§æ‡§∏‡•ç‡§™‡§¶ ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡•Ä ‡§Ü‡§¢‡§≥‡§≤‡•ç‡§Ø‡§æ‡§∏ ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§∏‡§æ‡§ß‡§æ</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Forgot Password Modal -->
<div class="modal fade" id="forgotModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§∞‡•Ä‡§∏‡•á‡§ü</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="forgotForm">
                    <div class="mb-3">
                        <label for="reset_email" class="form-label">‡§®‡•ã‡§Ç‡§¶‡§£‡•Ä‡§ï‡•É‡§§ ‡§à‡§Æ‡•á‡§≤ ‡§™‡§§‡•ç‡§§‡§æ</label>
                        <input type="email" class="form-control" id="reset_email" required>
                    </div>
                    <div class="alert alert-info">
                        <small>‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§à‡§Æ‡•á‡§≤‡§µ‡§∞ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§∞‡•Ä‡§∏‡•á‡§ü ‡§≤‡§ø‡§Ç‡§ï ‡§™‡§æ‡§†‡§µ‡§≤‡•Ä ‡§ú‡§æ‡§à‡§≤</small>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡§æ</button>
                <button type="button" class="btn btn-primary" onclick="sendResetLink()">‡§∞‡•Ä‡§∏‡•á‡§ü ‡§≤‡§ø‡§Ç‡§ï ‡§™‡§æ‡§†‡§µ‡§æ</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function togglePassword() {
    const passwordField = document.getElementById('password');
    const toggleIcon = document.getElementById('toggleIcon');
    
    if (passwordField.type === 'password') {
        passwordField.type = 'text';
        toggleIcon.classList.remove('fa-eye');
        toggleIcon.classList.add('fa-eye-slash');
    } else {
        passwordField.type = 'password';
        toggleIcon.classList.remove('fa-eye-slash');
        toggleIcon.classList.add('fa-eye');
    }
}

function demoLogin() {
    document.getElementById('email').value = 'demo@marathaarakshan.com';
    document.getElementById('password').value = 'demo123';
    document.querySelector('form').submit();
}

function googleLogin() {
    alert('Google ‡§≤‡•â‡§ó‡§ø‡§® ‡§≤‡§µ‡§ï‡§∞‡§ö ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§π‡•ã‡§à‡§≤');
}

function facebookLogin() {
    alert('Facebook ‡§≤‡•â‡§ó‡§ø‡§® ‡§≤‡§µ‡§ï‡§∞‡§ö ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§π‡•ã‡§à‡§≤');
}

function sendResetLink() {
    const email = document.getElementById('reset_email').value;
    
    if (!email) {
        alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§à‡§Æ‡•á‡§≤ ‡§™‡§§‡•ç‡§§‡§æ ‡§ü‡§æ‡§ï‡§æ');
        return;
    }
    
    // Mock API call
    alert('‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§∞‡•Ä‡§∏‡•á‡§ü ‡§≤‡§ø‡§Ç‡§ï ' + email + ' ‡§µ‡§∞ ‡§™‡§æ‡§†‡§µ‡§≤‡•Ä ‡§ó‡•á‡§≤‡•Ä');
    bootstrap.Modal.getInstance(document.getElementById('forgotModal')).hide();
}

// Auto-focus email field
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('email').focus();
});

// Form submission with loading state
document.querySelector('form').addEventListener('submit', function() {
    const submitBtn = this.querySelector('button[type="submit"]');
    const originalText = submitBtn.innerHTML;
    
    submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡§§ ‡§Ü‡§π‡•á...';
    submitBtn.disabled = true;
    
    // Reset after 3 seconds if no redirect
    setTimeout(() => {
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
    }, 3000);
});
</script>
{% endblock %}

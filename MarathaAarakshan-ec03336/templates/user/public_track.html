{% extends "base.html" %}

{% block title %}‡§Ö‡§∞‡•ç‡§ú ‡§ü‡•ç‡§∞‡•Ö‡§ï ‡§ï‡§∞‡§æ - ‡§Æ‡§∞‡§æ‡§†‡§æ ‡§Ü‡§∞‡§ï‡•ç‡§∑‡§£ ‡§Æ‡§Ç‡§ö{% endblock %}

{% block content %}
<div class="container py-5">
    <!-- Header -->
    <div class="row mb-5">
        <div class="col-12 text-center">
            <h1 class="display-5 text-primary mb-3">üîç ‡§Ö‡§∞‡•ç‡§ú ‡§∏‡•ç‡§•‡§ø‡§§‡•Ä ‡§§‡§™‡§æ‡§∏‡§æ</h1>
            <p class="lead">‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§Ö‡§∞‡•ç‡§ú‡§æ‡§ö‡•Ä ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§∏‡•ç‡§•‡§ø‡§§‡•Ä ‡§ú‡§æ‡§£‡•Ç‡§® ‡§ò‡•ç‡§Ø‡§æ</p>
        </div>
    </div>

    <!-- Track Form -->
    <div class="row">
        <div class="col-lg-6 mx-auto">
            <div class="card border-0 shadow-lg">
                <div class="card-header bg-primary text-white text-center">
                    <h4><i class="fas fa-search me-2"></i>‡§Ö‡§∞‡•ç‡§ú ‡§§‡§™‡§æ‡§∏‡§æ</h4>
                </div>
                <div class="card-body p-4">
                    <form method="POST" action="{% url 'applications:public_track' %}">
                        <div class="mb-3">
                            <label for="application_number" class="form-label">‡§Ö‡§∞‡•ç‡§ú ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï <span class="text-danger">*</span></label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-hashtag"></i></span>
                                <input type="text" class="form-control" id="application_number" name="application_number" 
                                       placeholder="MR2024123456" required>
                            </div>
                            <div class="form-text">‡§â‡§¶‡§æ: MR2024123456</div>
                        </div>

                        <div class="mb-3">
                            <label for="phone" class="form-label">‡§®‡•ã‡§Ç‡§¶‡§£‡•Ä‡§ï‡•É‡§§ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ <span class="text-danger">*</span></label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-phone"></i></span>
                                <input type="tel" class="form-control" id="phone" name="phone" 
                                       placeholder="9876543210" pattern="[0-9]{10}" required>
                            </div>
                            <div class="form-text">‡§Ö‡§∞‡•ç‡§ú‡§æ‡§§ ‡§¶‡§ø‡§≤‡•á‡§≤‡§æ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞</div>
                        </div>

                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-search me-2"></i>‡§∏‡•ç‡§•‡§ø‡§§‡•Ä ‡§§‡§™‡§æ‡§∏‡§æ
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Help Section -->
    <div class="row mt-5">
        <div class="col-lg-8 mx-auto">
            <div class="card bg-light border-0">
                <div class="card-body">
                    <h5 class="text-primary mb-3">
                        <i class="fas fa-question-circle me-2"></i>‡§Æ‡§¶‡§§ ‡§Ü‡§£‡§ø ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä
                    </h5>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <h6>‡§Ö‡§∞‡•ç‡§ú ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï ‡§ï‡•Å‡§†‡•á ‡§Æ‡§ø‡§≥‡•á‡§≤?</h6>
                            <ul class="small">
                                <li>‡§Ö‡§∞‡•ç‡§ú ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡•á‡§≤‡•ç‡§Ø‡§æ‡§®‡§Ç‡§§‡§∞ ‡§Æ‡§ø‡§≥‡§£‡§æ‡§±‡•ç‡§Ø‡§æ SMS ‡§Æ‡§ß‡•ç‡§Ø‡•á</li>
                                <li>‡§Ö‡§∞‡•ç‡§ú ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡•á‡§≤‡•ç‡§Ø‡§æ‡§®‡§Ç‡§§‡§∞‡§ö‡•ç‡§Ø‡§æ ‡§™‡•Å‡§∑‡•ç‡§ü‡•Ä ‡§™‡•á‡§ú‡§µ‡§∞</li>
                                <li>‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø‡§æ‡§ï‡§°‡•Ç‡§® ‡§Æ‡§ø‡§≥‡§£‡§æ‡§±‡•ç‡§Ø‡§æ ‡§∞‡§∏‡•Ä‡§¶‡§Æ‡§ß‡•ç‡§Ø‡•á</li>
                            </ul>
                        </div>
                        
                        <div class="col-md-6">
                            <h6>‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§Ü‡§≤‡•ç‡§Ø‡§æ‡§∏:</h6>
                            <ul class="small">
                                <li><strong>‡§π‡•á‡§≤‡•ç‡§™‡§≤‡§æ‡§á‡§®:</strong> +91 98765 43210</li>
                                <li><strong>WhatsApp:</strong> +91 98765 43210</li>
                                <li><strong>‡§à‡§Æ‡•á‡§≤:</strong> support@marathaarakshan.com</li>
                            </ul>
                        </div>
                    </div>

                    <div class="alert alert-info mt-3">
                        <strong>‡§ü‡§ø‡§™:</strong> ‡§Ö‡§∞‡•ç‡§ú ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï ‡§Ü‡§£‡§ø ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§Ö‡§ö‡•Ç‡§ï ‡§Ö‡§∏‡§£‡•á ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§Ü‡§π‡•á. 
                        ‡§Ö‡§∞‡•ç‡§ú ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡•á‡§≤‡•ç‡§Ø‡§æ‡§®‡§Ç‡§§‡§∞ 24 ‡§§‡§æ‡§∏‡§æ‡§Ç‡§®‡•Ä ‡§ü‡•ç‡§∞‡•Ö‡§ï‡§ø‡§Ç‡§ó ‡§∏‡•Å‡§∞‡•Ç ‡§π‡•ã‡§§‡•á.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Links -->
    <div class="row mt-4">
        <div class="col-12 text-center">
            <h5 class="mb-3">‡§Ö‡§®‡•ç‡§Ø ‡§â‡§™‡§Ø‡•Å‡§ï‡•ç‡§§ ‡§¶‡•Å‡§µ‡•á</h5>
            <div class="row justify-content-center">
                <div class="col-md-3 mb-2">
                    <a href="{% url 'core:eligibility_check' %}" class="btn btn-outline-success w-100">
                        <i class="fas fa-check-circle me-2"></i>‡§™‡§æ‡§§‡•ç‡§∞‡§§‡§æ ‡§§‡§™‡§æ‡§∏‡§æ
                    </a>
                </div>
                <div class="col-md-3 mb-2">
                    <a href="{% url 'core:guide' %}" class="btn btn-outline-info w-100">
                        <i class="fas fa-book me-2"></i>‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§ï
                    </a>
                </div>
                <div class="col-md-3 mb-2">
                    <a href="{% url 'core:documents' %}" class="btn btn-outline-warning w-100">
                        <i class="fas fa-download me-2"></i>‡§´‡•â‡§∞‡•ç‡§Æ ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§°
                    </a>
                </div>
                <div class="col-md-3 mb-2">
                    <a href="{% url 'core:contact' %}" class="btn btn-outline-primary w-100">
                        <i class="fas fa-phone me-2"></i>‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// Format application number
document.getElementById('application_number').addEventListener('input', function() {
    let value = this.value.toUpperCase().replace(/[^A-Z0-9]/g, '');
    this.value = value;
    
    // Basic validation pattern
    const isValid = /^MR\d{10}$/.test(value);
    this.classList.toggle('is-valid', isValid && value.length > 0);
    this.classList.toggle('is-invalid', !isValid && value.length > 0);
});

// Format phone number
document.getElementById('phone').addEventListener('input', function() {
    let value = this.value.replace(/\D/g, '');
    if (value.length > 10) value = value.slice(0, 10);
    this.value = value;
    
    const isValid = value.length === 10;
    this.classList.toggle('is-valid', isValid);
    this.classList.toggle('is-invalid', !isValid && value.length > 0);
});

// Form submission
document.querySelector('form').addEventListener('submit', function(e) {
    const appNumber = document.getElementById('application_number').value;
    const phone = document.getElementById('phone').value;
    
    if (!/^MR\d{10}$/.test(appNumber)) {
        e.preventDefault();
        alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§Ö‡§∞‡•ç‡§ú ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï ‡§ü‡§æ‡§ï‡§æ (‡§â‡§¶‡§æ: MR2024123456)');
        return;
    }
    
    if (!/^\d{10}$/.test(phone)) {
        e.preventDefault();
        alert('‡§ï‡•É‡§™‡§Ø‡§æ 10 ‡§Ö‡§Ç‡§ï‡•Ä ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§ü‡§æ‡§ï‡§æ');
        return;
    }
    
    // Show loading state
    const submitBtn = this.querySelector('button[type="submit"]');
    submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>‡§§‡§™‡§æ‡§∏‡§§ ‡§Ü‡§π‡•á...';
    submitBtn.disabled = true;
});

// Auto-format on paste
document.getElementById('application_number').addEventListener('paste', function(e) {
    setTimeout(() => {
        let value = this.value.toUpperCase().replace(/[^A-Z0-9]/g, '');
        this.value = value;
    }, 10);
});

// Auto-focus first field
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('application_number').focus();
});
</script>
{% endblock %}
